specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: Accounts
    network: mumbai
    source:
      address: "0xc2bA254F7De519ef72C4f69Aa4843e89B6F8483d"
      abi: Accounts
      startBlock: 37000000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - User
        - Endowment
        - EndowmentTokenLocked
        - EndowmentTokenLiquid
        - EndowmentTokenAllowanceSpender
        - EndowmentDepositTransaction
        - EndowmentWithdrawTransaction
        - EndowmentSwapTransaction
      abis:
        - name: Accounts
          file: ./abis/Accounts.json
      eventHandlers:
        - event: EndowmentCreated(uint256,uint8)
          handler: handleEndowmentCreated
        - event: AllowanceUpdated(uint256,address,address,uint256,uint256,uint256)
          handler: handleAllowanceUpdated
        - event: AllowanceSpent(uint256,address,address,uint256)
          handler: handleAllowanceSpent
        - event: EndowmentDeposit(uint256,address,uint256,uint256)
          handler: handleEndowmentDeposit
        - event: EndowmentWithdraw(uint256,address,uint256,uint8,address,uint32)
          handler: handleEndowmentWithdraw
        - event: TokenSwapped(uint256,uint8,address,uint256,address,uint256)
          handler: handleTokenSwapped
      file: ./src/accounts.ts
  - kind: ethereum
    name: APTeamMultiSig
    network: mumbai
    source:
      address: "0x8669Fd38E434C0724834F4b995B85bD50831E7c7"
      abi: APTeamMultiSig
      startBlock: 37000000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - User
        - MultiSig
        - MultiSigOwner
        - MultiSigTransaction
        - TransactionConfirmation
      abis:
        - name: APTeamMultiSig
          file: ./abis/APTeamMultiSig.json
      eventHandlers:
        - event: Initialized(uint8)
          handler: handleInitialized
        - event: ApprovalsRequiredChanged(uint256)
          handler: handleApprovalsRequiredChanged
        - event: RequireExecutionChanged(bool)
          handler: handleRequireExecutionChanged
        - event: ExpiryChanged(uint256)
          handler: handleExpiryChanged
        - event: OwnerAdded(address)
          handler: handleOwnerAdded
        - event: OwnerRemoved(address)
          handler: handleOwnerRemoved
        - event: TransactionSubmitted(address,uint256)
          handler: handleTransactionSubmitted
        - event: TransactionConfirmed(address,uint256)
          handler: handleTransactionConfirmed
        - event: TransactionExecuted(uint256)
          handler: handleTransactionExecuted
        - event: TransactionConfirmationRevoked(address,uint256)
          handler: handleConfirmationRevoked
      file: ./src/ap-team-multi-sig.ts
  - kind: ethereum
    name: EndowmentMultiSigFactory
    network: mumbai
    source:
      address: "0x0d7B9bCE00a01b525181013383F82d35D079F98d"
      abi: EndowmentMultiSigFactory
      startBlock: 37000000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ContractInstantiated
        - ImplementationUpdated
        - EndowmentMultiSigFactoryOwnershipTransferred
        - ProxyAdminUpdated
      abis:
        - name: EndowmentMultiSigFactory
          file: ./abis/EndowmentMultiSigFactory.json
      eventHandlers:
        - event: ContractInstantiated(address,address)
          handler: handleContractInstantiated
        - event: ImplementationUpdated(address)
          handler: handleImplementationUpdated
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: ProxyAdminUpdated(address)
          handler: handleProxyAdminUpdated
      file: ./src/endowment-multi-sig-factory.ts
  - kind: ethereum
    name: CharityApplications
    network: mumbai
    source:
      address: "0x824F03DdEB9a7cd6852AA156392e358ACC79924b"
      abi: CharityApplications
      startBlock: 37000000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - User
        - MultiSig
        - MultiSigOwner
        - MultiSigTransaction
        - TransactionConfirmation
        - ApplicationsMultisig
        - ApplicationProposal
        - ApplicationConfirmation
      abis:
        - name: CharityApplications
          file: ./abis/CharityApplications.json
      eventHandlers:
        - event: Initialized(uint8)
          handler: handleInitialized
        - event: ApprovalsRequiredChanged(uint256)
          handler: handleApprovalsRequiredChanged
        - event: RequireExecutionChanged(bool)
          handler: handleRequireExecutionChanged
        - event: ExpiryChanged(uint256)
          handler: handleExpiryChanged
        - event: OwnerAdded(address)
          handler: handleOwnerAdded
        - event: OwnerRemoved(address)
          handler: handleOwnerRemoved
        - event: TransactionSubmitted(address,uint256)
          handler: handleTransactionSubmitted
        - event: TransactionConfirmed(address,uint256)
          handler: handleTransactionConfirmed
        - event: TransactionExecuted(uint256)
          handler: handleTransactionExecuted
        - event: TransactionConfirmationRevoked(address,uint256)
          handler: handleConfirmationRevoked
        - event: ApplicationConfirmationRevoked(uint256,address)
          handler: handleApplicationConfirmationRevoked
        - event: ApplicationConfirmed(uint256,address)
          handler: handleApplicationConfirmed
        - event: ApplicationExecuted(uint256)
          handler: handleApplicationExecuted
        - event: ApplicationProposed(uint256)
          handler: handleApplicationProposed
      file: ./src/charity-applications.ts
templates:
  - kind: ethereum
    name: EndowmentMultiSig
    network: mumbai
    source:
      abi: EndowmentMultiSig
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - User
        - MultiSig
        - MultiSigOwner
        - MultiSigTransaction
        - TransactionConfirmation
      abis:
        - name: EndowmentMultiSig
          file: ./abis/EndowmentMultiSig.json
      eventHandlers:
        - event: Initialized(uint8)
          handler: handleInitialized
        - event: ApprovalsRequiredChanged(uint256)
          handler: handleApprovalsRequiredChanged
        - event: RequireExecutionChanged(bool)
          handler: handleRequireExecutionChanged
        - event: ExpiryChanged(uint256)
          handler: handleExpiryChanged
        - event: OwnerAdded(address)
          handler: handleOwnerAdded
        - event: OwnerRemoved(address)
          handler: handleOwnerRemoved
        - event: TransactionSubmitted(address,uint256)
          handler: handleTransactionSubmitted
        - event: TransactionConfirmed(address,uint256)
          handler: handleTransactionConfirmed
        - event: TransactionExecuted(uint256)
          handler: handleTransactionExecuted
        - event: TransactionConfirmationRevoked(address,uint256)
          handler: handleConfirmationRevoked
      file: ./src/endowment-multi-sig.ts
